## 项目模块

### 技术栈

- NacOS

- Spring Cloud Gateway

- Spring Cloud OpenFeign

-  ElasticSearch

- Mysql：集群

- Redis：集群

- Nginx：集群

- RabbitMQ：集群

- Spring Cache

- Seata(分布式事务)

- ShardingSphere：分布式数据库中间件

- JMeter 压力测试

- VisualVM 性能监控

- Redisson：分布式锁框架

- Sleuth(链路追踪)+Zipkin(可视化)

- Sentinel(森踢脑)：限流&熔断&降级

- Kubernetes

- KubeSphere

- Jenkins

### 按微服务划分

#### BI大屏，仓库看板

BI大屏：

1. 显示各个生产线的生产情况
2. 公司宣传视频
3. 人员，客户等情况

看板：

1. 发裁片仓库应发货数，已发货书，数量不对标红
2. 滚动

#### 样衣组系统

1. 设计师上传AI文件过大（200MB+），公司本地服务器带宽不够
2. 使用阿里云oss对象存储。用的spring cloud alibaba有直接对应oss的组件库。
3. AI图使用的下载接口直接是返回的oss地址
4. 样衣组客户端使用wpf制作



#### 库存系统

做好的衣服待发货，或者次品处理等，方便会计盘点

1. 成品仓
2. 裁片仓
3. 密集柜



#### 工人扫码计件（核心）

1. 生成二维码，图片base64返回，卡号aes加密
2. 从erp系统读取款号，按部位和款号生成卡号(自增)
3. relasticSearch用来查询员工扫码记录{数据量大。存放卡号对应款号，款式颜色等信息。（在生产的款号信息存入redis）,先日志记录计算qps}
4. 没上redis每秒380吞吐量，210ms相应，加了redis后，1200多吞吐量，80ms
5. 工人刷卡(幂等)，进行查询款式信息可能涉及多个模块，使用异步来获取(feign+异步)，工人刷卡加入消息队列，保证消息可用，刷卡失败后，异常处理刷卡数据
6. 一道工序下去这个短时间内经常被使用，所以查询的接口加上Spring Cache
7. 工人信息通过erp系统提供的接口读取

##### 总检计件

总检工序疵点记录

##### 线外组计件



##### 补录

扫码补录权限问题



##### 工资计算

BigDecimal



##### 每日的自动数据生成汇报

发送到老板邮箱

每天（月）定时任务计算漏扫码



#### 罗斯系统老数据对接查询

#### 网关微服务



### 数据库划分

### 容灾

两地三中心

厦门总厂

赣州一厂

赣州二厂

